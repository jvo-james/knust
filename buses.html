<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Vitra – KNUST Shuttle Tracker</title>

  <!-- Fonts & Icons -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;600;700&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Raleway:wght@400;700&display=swap" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>
  <!-- (Optional) Leaflet CSS if you integrate a map later -->
  <!-- <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/> -->

  <style>
   :root {
  --primary: #007bff;
  --primary-dark: #0056b3;
  --secondary: #00274d;
  --accent: #ff6f61;
  --light-bg: #f5fcff;
  --white: #ffffff;
  --dark-text: #222222;
  --muted-text: #666666;
  --radius: 12px;
  --gap: 20px;
  --transition: 0.3s ease;
  --shadow-light: 0 4px 16px rgba(0, 0, 0, 0.1);
  --shadow-dark: 0 8px 24px rgba(0, 0, 0, 0.15);
  --font-sans: 'Poppins', sans-serif;
  --font-alt: 'Montserrat', sans-serif;
}

*,
*::before,
*::after {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
}

body {
  font-family: var(--font-sans);
  background: var(--light-bg);
  color: var(--dark-text);
  line-height: 1.6;
  overflow-x: hidden;
}

/* ---------------------------------------------------
   HEADER & NAVIGATION
--------------------------------------------------- */
.app-header {
  position: sticky;
  top: 0;
  width: 100%;
  background: var(--secondary);
  color: var(--white);
  z-index: 1000;
  box-shadow: var(--shadow-light);
}
.header-inner {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem var(--gap);
}
.logo {
  width: 50px;
  height: 50px;
}
.app-title {
  font-family: var(--font-alt);
  font-size: 1.8rem;
  font-weight: 700;
  display: flex;
  align-items: center;
}
.app-title i {
  margin-right: 0.5rem;
  color: var(--accent);
}
.header-nav {
  display: flex;
  align-items: center;
}
.nav-btn {
  background: none;
  border: none;
  color: var(--white);
  font-size: 1rem;
  margin-left: 1rem;
  padding: 0.5rem;
  cursor: pointer;
  transition: color var(--transition), background var(--transition);
  border-radius: var(--radius);
}
.nav-btn:hover,
.nav-btn.active {
  background: rgba(255,255,255,0.1);
  color: var(--accent);
}
.hamburger {
  display: none;
  background: none;
  border: none;
  color: var(--white);
  font-size: 1.8rem;
  cursor: pointer;
}
.mobile-sidebar {
  position: fixed;
  top: 0;
  left: -260px;
  width: 260px;
  height: 100%;
  background: var(--secondary);
  padding: 2rem 1rem;
  box-shadow: var(--shadow-dark);
  transition: left var(--transition);
  z-index: 1100;
}
.mobile-sidebar .close-sidebar {
  background: none;
  border: none;
  color: var(--white);
  font-size: 1.2rem;
  margin-bottom: 2rem;
  cursor: pointer;
}
.mobile-sidebar .nav-btn {
  display: block;
  width: 100%;
  text-align: left;
  margin-bottom: 1rem;
}

/* ---------------------------------------------------
   HERO SECTION
--------------------------------------------------- */
.hero-section {
  position: relative;
  height: 80vh;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}
.hero-background img {
  position: absolute;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: brightness(0.6);
}
.hero-overlay {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.3);
}
.hero-content {
  position: relative;
  text-align: center;
  color: var(--white);
  max-width: 800px;
  padding: 0 var(--gap);
}
.hero-title {
  font-family: var(--font-alt);
  font-size: 3rem;
  font-weight: 700;
  margin-bottom: 1rem;
  white-space: nowrap;
  overflow: hidden;
  border-right: 3px solid var(--accent);
}
.hero-subtitle {
  font-size: 1.25rem;
  margin-bottom: 2rem;
}
.hero-buttons button {
  margin: 0 0.5rem;
}
.bus-animations {
  position: absolute;
  bottom: 10%;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 2rem;
}
.bus-animation {
  font-size: 2rem;
  opacity: 0.8;
}
@keyframes busMove {
  0% { transform: translateX(-100px) scale(0.8); opacity: 0; }
  50% { opacity: 1; }
  100% { transform: translateX(100px) scale(1); opacity: 0; }
}
.animate-bus {
  animation: busMove 4s var(--transition) infinite;
}

/* ---------------------------------------------------
   MAIN CONTAINER & SECTIONS
--------------------------------------------------- */
.container {
  max-width: 1200px;
  margin: -10vh auto 2rem;
  padding: 0 var(--gap);
}
.section {
  margin: 4rem 0;
}
.section h2 {
  font-family: var(--font-alt);
  font-size: 1.6rem;
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  color: var(--secondary);
}
.section h2 i {
  margin-right: 0.5rem;
  color: var(--accent);
}

/* ---------------------------------------------------
   LIVE SHUTTLES
--------------------------------------------------- */
.map-container {
  height: 350px;
  border-radius: var(--radius);
  overflow: hidden;
  margin-bottom: 1rem;
  box-shadow: var(--shadow-dark);
}
.live-table-container {
  overflow-x: auto;
}
.live-table {
  width: 100%;
  border-collapse: collapse;
  box-shadow: var(--shadow-light);
}
.live-table th,
.live-table td {
  padding: 0.75rem 1rem;
  text-align: left;
}
.live-table th {
  background: var(--secondary);
  color: var(--white);
  position: sticky;
  top: 0;
}
.live-table tr:nth-child(even) {
  background: #fafafa;
}
.live-table td {
  border-bottom: 1px solid #eee;
}

/* ---------------------------------------------------
   BOOKING FORM
--------------------------------------------------- */
.booking-section form {
  background: var(--white);
  padding: 2rem;
  border-radius: var(--radius);
  box-shadow: var(--shadow-light);
}
.form-row {
  display: flex;
  gap: var(--gap);
  flex-wrap: wrap;
}
.form-group {
  flex: 1;
  min-width: 200px;
  display: flex;
  flex-direction: column;
  margin-bottom: 1rem;
}
.form-group label {
  margin-bottom: 0.5rem;
  font-weight: 600;
  color: var(--secondary);
}
.select,
input[type="date"] {
  padding: 0.75rem;
  border: 1px solid #ccc;
  border-radius: var(--radius);
  font-size: 1rem;
  transition: border var(--transition);
}
.select:focus,
input:focus {
  outline: none;
  border-color: var(--primary);
}

/* ---------------------------------------------------
   HISTORY BUTTONS
--------------------------------------------------- */
.history-buttons {
  display: flex;
  gap: 1rem;
  justify-content: center;
  margin: 2rem 0;
}
.history-buttons .btn-secondary {
  padding: 0.75rem 1.5rem;
  border-radius: var(--radius);
  transition: background var(--transition), color var(--transition);
}
.history-buttons .btn-secondary.active,
.history-buttons .btn-secondary:hover {
  background: var(--secondary);
  color: var(--white);
}

/* ---------------------------------------------------
   QUICK BOOK CARDS
--------------------------------------------------- */
.grid-cards {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: var(--gap);
}
.card {
  position: relative;
  background: var(--white);
  border-radius: var(--radius);
  overflow: hidden;
  box-shadow: var(--shadow-light);
  cursor: pointer;
  transition: transform var(--transition), box-shadow var(--transition);
}
.card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-dark);
}
.card img {
  width: 100%;
  height: 140px;
  object-fit: cover;
}
.card-body {
  padding: 1rem;
  text-align: center;
  font-weight: 600;
  color: var(--secondary);
}
.quick-modal .modal {
  max-width: 320px;
  text-align: center;
}

/* ---------------------------------------------------
   MODALS (GENERAL)
--------------------------------------------------- */
.modal-overlay {
  position: fixed;
  top: 0; left: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.6);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  backdrop-filter: blur(4px);
}
.modal {
  background: var(--white);
  border-radius: var(--radius);
  max-width: 500px;
  width: 90%;
  padding: 2rem;
  box-shadow: var(--shadow-dark);
  position: relative;
  transition: transform var(--transition);
}
.close-btn {
  position: absolute;
  top: 1rem;
  right: 1rem;
  background: none;
  border: none;
  font-size: 1.2rem;
  cursor: pointer;
  color: var(--muted-text);
  transition: color var(--transition);
}
.close-btn:hover {
  color: var(--dark-text);
}

/* Ride History Modal Specific */
.history-modal h3 {
  margin-bottom: 1rem;
  color: var(--secondary);
}
.history-tabs {
  display: flex;
  justify-content: space-around;
  margin-bottom: 1.5rem;
}
.history-tabs .tab {
  background: var(--light-bg);
  border: none;
  padding: 0.5rem 1rem;
  border-radius: var(--radius);
  cursor: pointer;
  transition: background var(--transition), color var(--transition);
}
.history-tabs .tab.active,
.history-tabs .tab:hover {
  background: var(--secondary);
  color: var(--white);
}
.ride-list {
  max-height: 250px;
  overflow-y: auto;
  list-style: none;
  padding-left: 0;
  margin-bottom: 1rem;
}
.ride-list li {
  padding: 0.75rem;
  border-bottom: 1px solid #eee;
  cursor: pointer;
  transition: background var(--transition);
}
.ride-list li:hover {
  background: var(--light-bg);
}
.ride-detail {
  background: #fafafa;
  padding: 1rem;
  border-radius: var(--radius);
  text-align: center;
}
.ride-detail h4 {
  margin-bottom: 0.5rem;
  color: var(--secondary);
}

/* ---------------------------------------------------
   SUPPORT CHAT BUTTON
--------------------------------------------------- */
.support-chat-btn {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  background: var(--accent);
  color: var(--white);
  border: none;
  border-radius: 50%;
  width: 60px;
  height: 60px;
  font-size: 1.5rem;
  cursor: pointer;
  box-shadow: var(--shadow-dark);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform var(--transition);
}
.support-chat-btn:hover {
  transform: scale(1.1);
}

/* ---------------------------------------------------
   FOOTER
--------------------------------------------------- */
.app-footer {
  text-align: center;
  padding: 2rem var(--gap);
  background: #f0f0f0;
  color: #555;
  font-size: 0.9rem;
}
.app-footer i {
  color: var(--accent);
  margin-left: 0.5rem;
}

/* ---------------------------------------------------
   RESPONSIVE
--------------------------------------------------- */
@media (max-width: 768px) {
  .header-inner { flex-wrap: wrap; text-align: center; }
  .desktop-only { display: none; }
  .hamburger { display: block; }
  .form-row { flex-direction: column; }
  .hero-title { font-size: 2.5rem; }
}
@media (max-width: 480px) {
  :root { --gap: 12px; }
  .hero-title { font-size: 2rem; }
  .hero-subtitle { font-size: 1rem; }
  .btn-primary, .btn-secondary { width: 100%; }
}


    .accordion .accordion-item { margin-bottom:1rem; }
    .accordion-header {
      width:100%; background:var(--white); border:1px solid #ccc;
      border-radius:var(--radius); padding:.75rem 1rem;
      display:flex; align-items:center; justify-content:space-between;
      cursor:pointer; transition:background var(--transition);
    }
    .accordion-body { display:none; padding:1rem; border-left:4px solid var(--accent); }

   

    /*— Footer —*/
    .app-footer { text-align:center; padding:1.5rem var(--gap); background:#f0f0f0; color:#555; font-size:.9rem; }
    .app-footer i { color:var(--accent); margin-left:.5rem; }

    /*— Responsive —*/
    @media(max-width:768px){
      .header-inner { flex-wrap:wrap; text-align:center; }
      .desktop-only { display:none; }
      .hamburger { display:block; }
      .form-row { flex-direction:column; }
      .hero { flex-direction:column; text-align:center; }
      .hero-content, .hero-image { max-width:100%; }
    }
    @media(max-width:480px){
      :root{--gap:12px;}
      .app-title{font-size:1.2rem;}
      .btn-primary, .btn-secondary{width:100%;}
    }
  </style>
</head>
<body>
  <!-- Sign-In Overlay -->
  <div class="signin-overlay" id="signinOverlay">
    <div class="modal signin-modal">
      <h3><i class="fas fa-user-lock"></i> Student Sign In</h3>
      <form id="signinForm">
        <div class="form-group">
          <label for="studentId">Student ID</label>
          <input type="text" id="studentId" placeholder="8‑digit ID" maxlength="8" required>
        </div>
        <div class="form-group">
          <label for="username">Username</label>
          <input type="text" id="username" placeholder="Letters only" pattern="[A-Za-z]+" required>
        </div>
        <div class="form-group">
          <label for="password">Password</label>
          <input type="password" id="password" placeholder="At least 6 chars" minlength="6" required>
        </div>
        <button type="submit" class="btn-primary">
          <i class="fas fa-sign-in-alt"></i> Sign In
        </button>
      </form>
    </div>
  </div>

  <!-- Header & Nav -->
 <header class="app-header">
    <div class="header-inner">
      <img src="knustlogo.jpeg" alt="KNUST Logo" class="logo">
      <h1 class="app-title"><i class="fas fa-shuttle-van"></i> KNUST Shuttle Tracker</h1>
      <button class="hamburger" id="hamburgerBtn"><i class="fas fa-bars"></i></button>
      <nav class="header-nav desktop-only">
        <button class="nav-btn active" data-target="hero"><i class="fas fa-home"></i> Home</button>
        <button class="nav-btn" data-target="live-shuttles"><i class="fas fa-route"></i> Live Shuttles</button>
        <button class="nav-btn" data-target="book-ride"><i class="fas fa-paper-plane"></i> Book Ride</button>
        <button class="nav-btn" data-target="quick-book"><i class="fas fa-thumbs-up"></i> Quick Book</button>
      </nav>
    </div>
    <aside class="mobile-sidebar" id="mobileSidebar">
      <button class="close-sidebar" id="closeSidebar"><i class="fas fa-times"></i></button>
      <button class="nav-btn" data-target="hero"><i class="fas fa-home"></i> Home</button>
      <button class="nav-btn" data-target="live-shuttles"><i class="fas fa-route"></i> Live Shuttles</button>
      <button class="nav-btn" data-target="book-ride"><i class="fas fa-paper-plane"></i> Book Ride</button>
      <button class="nav-btn" data-target="quick-book"><i class="fas fa-thumbs-up"></i> Quick Book</button>
    </aside>
  </header>


  <!-- Hero -->
  <section id="hero" class="hero-section">
    <div class="hero-background">
      <img src="shuttle.jpg" alt="Campus Shuttle Background">
      <div class="hero-overlay"></div>
    </div>
    <div class="hero-content">
      <h2 class="hero-title">Welcome to <span id="typewriter"></span></h2>
      <p class="hero-subtitle">Track, book and ride with confidence.</p>
      <div class="hero-buttons">
        <button class="btn-primary" data-scroll="book-ride"><i class="fas fa-paper-plane"></i> Book a Ride</button>
        <button class="btn-secondary" data-scroll="live-shuttles"><i class="fas fa-route"></i> See Live Shuttles</button>
      </div>
      <div class="bus-animations">
        <div class="bus-animation bus-1"><i class="fas fa-shuttle-van"></i></div>
        <div class="bus-animation bus-2"><i class="fas fa-bus"></i></div>
        <div class="bus-animation bus-3"><i class="fas fa-bus-alt"></i></div>
      </div>
    </div>
  </section>


  <main class="container">

    <!-- Live Shuttles -->
    <section id="live-shuttles" class="section live-section">
      <h2><i class="fas fa-route"></i> Live Shuttle Map & Status</h2>
      <div id="map" class="map-container">
        <!-- actual map will render here -->
      </div>
      <div class="live-table-container">
        <table class="live-table">
          <thead>
            <tr>
              <th>Route</th>
              <th>ETA</th>
              <th>Status</th>
              <th>Capacity</th>
            </tr>
          </thead>
          <tbody id="liveTableBody">
            <!-- dynamic rows -->
          </tbody>
        </table>
      </div>
    </section>

    <!-- Book Your Ride -->
    <section id="book-ride" class="section booking-section">
      <h2><i class="fas fa-paper-plane"></i> Book Your Ride</h2>
      <form id="bookingForm">
        <div class="form-row">
          <div class="form-group">
            <label for="pickup"><i class="fas fa-location-arrow"></i> Pick‑Up</label>
            <select id="pickup" required>
              <option value="">Select pick‑up</option>
              <option value="KSB">KSB</option>
              <option value="Medical Village">Medical Village</option>
              <option value="Brunei">Brunei</option>
              <option value="Casely Hayeford">Casely Hayeford</option>
              <option value="College of Science">College of Science</option>
              <option value="Commercial Area">Commercial Area</option>
            </select>
          </div>
          <div class="form-group">
            <label for="destination"><i class="fas fa-flag-checkered"></i> Destination</label>
            <select id="destination" required>
              <option value="">Select destination</option>
              <option value="KSB">KSB</option>
              <option value="Medical Village">Medical Village</option>
              <option value="Brunei">Brunei</option>
              <option value="Casely Hayeford">Casely Hayeford</option>
              <option value="College of Science">College of Science</option>
              <option value="Commercial Area">Commercial Area</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="date"><i class="fas fa-calendar-alt"></i> Date</label>
            <input type="date" id="date" required>
          </div>
          <div class="form-group">
            <label for="timeslot"><i class="fas fa-clock"></i> Time Slot</label>
            <select id="timeslot" required>
              <option value="">Select time</option>
              <option>6:00 AM – 7:00 AM</option>
              <option>7:00 AM – 8:00 AM</option>
              <option>8:00 AM – 9:00 AM</option>
              <option>9:00 AM –10:00 AM</option>
              <option>10:00 AM –11:00 AM</option>
              <option>12:00 PM – 1:00 PM</option>
              <option>1:00 PM – 2:00 PM</option>
              <option>3:00 PM – 4:00 PM</option>
            </select>
          </div>
        </div>
        <button type="submit" class="btn-primary"><i class="fas fa-paper-plane"></i> Confirm Booking</button>
      </form>
    </section>

    <!-- Ride History Buttons -->
    <div class="history-buttons">
      <button id="prevRidesBtn" class="btn-secondary active"><i class="fas fa-archive"></i> Previous Rides</button>
      <button id="upcomingRidesBtn" class="btn-secondary"><i class="fas fa-clock"></i> Upcoming Rides</button>
      <button id="allRidesBtn" class="btn-secondary"><i class="fas fa-list"></i> All Rides</button>
    </div>

    <!-- Quick Book Cards -->
    <section id="quick-book" class="section quick-book-section">
      <h2><i class="fas fa-thumbs-up"></i> Quick Book Popular Stops</h2>
      <div class="grid-cards">
        <div class="card" data-page="ksbQuickModal">
          <img src="ksb.webp" alt="KSB">
          <div class="card-body"><p>KSB</p></div>
        </div>
        <div class="card" data-page="medicalQuickModal">
          <img src="medical.jpg" alt="Medical Village">
          <div class="card-body"><p>Medical Village</p></div>
        </div>
        <div class="card" data-page="bruneiQuickModal">
          <img src="brunei.jpeg" alt="Brunei">
          <div class="card-body"><p>Brunei</p></div>
        </div>
        <div class="card" data-page="caselyQuickModal">
          <img src="casely.jpg" alt="Casely Hayeford">
          <div class="card-body"><p>Casely Hayeford</p></div>
        </div>
        <div class="card" data-page="scienceQuickModal">
          <img src="science.jpg" alt="College of Science">
          <div class="card-body"><p>College of Science</p></div>
        </div>
        <div class="card" data-page="commerceQuickModal">
          <img src="commercial.jpg" alt="Commercial Area">
          <div class="card-body"><p>Commercial Area</p></div>
        </div>
      </div>
    </section>

  </main>

  <!-- Ride History Modal -->
  <div class="modal-overlay" id="historyModal">
    <div class="modal history-modal">
      <button class="close-btn" data-close="historyModal"><i class="fas fa-times"></i></button>
      <h3><i class="fas fa-history"></i> My Rides</h3>
      <div class="history-tabs">
        <button class="tab active" data-tab="prev">Previous</button>
        <button class="tab" data-tab="upcoming">Upcoming</button>
        <button class="tab" data-tab="all">All</button>
      </div>
      <ul class="ride-list" id="rideList">
        <!-- dynamic list items -->
      </ul>
      <div class="ride-detail" id="rideDetail">
        <!-- when clicked: show ride info + QR code -->
      </div>
    </div>
  </div>

  <!-- Quick Book Modals -->
  <div class="modal-overlay" id="ksbQuickModal">
    <div class="modal quick-modal">
      <button class="close-btn" data-close="ksbQuickModal"><i class="fas fa-times"></i></button>
      <h3><i class="fas fa-university"></i> Quick Book: KSB</h3>
      <p>Secure your seat on the next shuttle departing to/from KSB.</p>
      <button class="btn-primary" data-scroll="book-ride"><i class="fas fa-paper-plane"></i> Book Now</button>
    </div>
  </div>
  <div class="modal-overlay" id="medicalQuickModal">
    <div class="modal quick-modal">
      <button class="close-btn" data-close="medicalQuickModal"><i class="fas fa-times"></i></button>
      <h3><i class="fas fa-hospital"></i> Quick Book: Medical Village</h3>
      <p>Reserve your spot for the next shuttle at Medical Village.</p>
      <button class="btn-primary" data-scroll="book-ride"><i class="fas fa-paper-plane"></i> Book Now</button>
    </div>
  </div>
  <div class="modal-overlay" id="bruneiQuickModal">
    <div class="modal quick-modal">
      <button class="close-btn" data-close="bruneiQuickModal"><i class="fas fa-times"></i></button>
      <h3><i class="fas fa-tree"></i> Quick Book: Brunei</h3>
      <p>Get on the green route—book your Brunei shuttle now.</p>
      <button class="btn-primary" data-scroll="book-ride"><i class="fas fa-paper-plane"></i> Book Now</button>
    </div>
  </div>
  <div class="modal-overlay" id="caselyQuickModal">
    <div class="modal quick-modal">
      <button class="close-btn" data-close="caselyQuickModal"><i class="fas fa-times"></i></button>
      <h3><i class="fas fa-university"></i> Quick Book: Casely Hayeford</h3>
      <p>Hop on the shuttle serving Casely Hayeford—reserve now.</p>
      <button class="btn-primary" data-scroll="book-ride"><i class="fas fa-paper-plane"></i> Book Now</button>
    </div>
  </div>
  <div class="modal-overlay" id="scienceQuickModal">
    <div class="modal quick-modal">
      <button class="close-btn" data-close="scienceQuickModal"><i class="fas fa-times"></i></button>
      <h3><i class="fas fa-flask"></i> Quick Book: College of Science</h3>
      <p>Lock in your seat to/from the College of Science shuttle.</p>
      <button class="btn-primary" data-scroll="book-ride"><i class="fas fa-paper-plane"></i> Book Now</button>
    </div>
  </div>
  <div class="modal-overlay" id="commerceQuickModal">
    <div class="modal quick-modal">
      <button class="close-btn" data-close="commerceQuickModal"><i class="fas fa-times"></i></button>
      <h3><i class="fas fa-shopping-bag"></i> Quick Book: Commercial Area</h3>
      <p>Secure your seat on the busy Commercial Area route.</p>
      <button class="btn-primary" data-scroll="book-ride"><i class="fas fa-paper-plane"></i> Book Now</button>
    </div>
  </div>

  <!-- Floating Support Chat -->
  <button id="supportChat" class="support-chat-btn">
    <i class="fas fa-headset"></i> Live Support
  </button>


    <!-- FAQ -->
    <section class="section faq-section" id="faq">
      <h2><i class="fas fa-question-circle"></i> FAQs</h2>
      <div class="accordion">
        <div class="accordion-item">
          <button class="accordion-header"><i class="fas fa-chevron-down"></i> How do I cancel?</button>
          <div class="accordion-body">Tap the trash icon in “My Rides.”</div>
        </div>
        <div class="accordion-item">
          <button class="accordion-header"><i class="fas fa-chevron-down"></i> Can I book for others?</button>
          <div class="accordion-body">Yes—enter their student ID in the form.</div>
        </div>
        <div class="accordion-item">
          <button class="accordion-header"><i class="fas fa-chevron-down"></i> Weekend service?</button>
          <div class="accordion-body">Saturdays 7 AM–2 PM, no service Sundays.</div>
        </div>
        <div class="accordion-item">
          <button class="accordion-header"><i class="fas fa-chevron-down"></i> Night shuttles?</button>
          <div class="accordion-body">8 PM–11 PM under “Late Rides.”</div>
        </div>
      </div>
    </section>

    <!-- Contact -->
    <section class="section contact-section">
      <h2><i class="fas fa-envelope"></i> Contact & Support</h2>
      <p><i class="fas fa-phone-alt"></i> +233 24 123 4567</p>
      <p><i class="fas fa-envelope-open-text"></i> support@knust-shuttle.app</p>
      <div class="social-icons">
        <a href="#"><i class="fab fa-facebook-square"></i></a>
        <a href="#"><i class="fab fa-twitter-square"></i></a>
        <a href="#"><i class="fab fa-instagram-square"></i></a>
        <a href="#"><i class="fab fa-linkedin"></i></a>
      </div>
    </section>
  </main>


  <!-- Footer -->
  <footer class="app-footer">
    <p>&copy; 2025 KNUST Shuttle Tracker — Built with <i class="fas fa-heart"></i> by a KNUST Student</p>
  </footer>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // --- SIGN‑IN OVERLAY ---
  const signinOverlay = document.getElementById('signinOverlay');
  const signinForm    = document.getElementById('signinForm');
  if (localStorage.getItem('signedIn') === 'true') {
    signinOverlay.style.display = 'none';
  } else {
    signinOverlay.style.display = 'flex';
  }
  signinForm.addEventListener('submit', e => {
    e.preventDefault();
    localStorage.setItem('signedIn', 'true');
    signinOverlay.style.display = 'none';
  });

  // --- MOBILE SIDEBAR ---
  const hamBtn      = document.getElementById('hamburgerBtn');
  const mobileNav   = document.getElementById('mobileSidebar');
  const closeNavBtn = document.getElementById('closeSidebar');
  hamBtn.addEventListener('click', () => mobileNav.style.left = '0');
  closeNavBtn.addEventListener('click', () => mobileNav.style.left = '-260px');

  // --- SMOOTH SCROLL & NAV ACTIVATION ---
  function scrollToSection(id) {
    document.getElementById(id).scrollIntoView({ behavior: 'smooth' });
    mobileNav.style.left = '-260px';
  }
  document.querySelectorAll('.nav-btn[data-target]').forEach(btn => {
    btn.addEventListener('click', () => {
      document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      scrollToSection(btn.dataset.target);
    });
  });
  document.querySelectorAll('[data-scroll]').forEach(btn => {
    btn.addEventListener('click', () => scrollToSection(btn.dataset.scroll));
  });

  // --- TYPEWRITER EFFECT ---
  const typeEl = document.getElementById('typewriter');
  const words  = ['Your Campus Commute', 'The Smart Shuttle Tracker', 'KNUST Shuttle Tracker'];
  let wIndex = 0, cIndex = 0, forward = true;
  setInterval(() => {
    const current = words[wIndex];
    if (forward) {
      typeEl.textContent = current.slice(0, ++cIndex);
      if (cIndex === current.length) forward = false;
    } else {
      typeEl.textContent = current.slice(0, --cIndex);
      if (cIndex === 0) { forward = true; wIndex = (wIndex + 1) % words.length; }
    }
  }, 150);

  // --- BUS ICON ANIMATIONS TRIGGER ---
  document.querySelectorAll('.bus-animation').forEach((bus, i) => {
    bus.style.animationDelay = (i * 0.5) + 's';
    bus.classList.add('animate-bus');
  });

  // --- INITIALIZE LEAFLET MAP ---
  const map = L.map('map', { zoomControl: false }).setView([6.6667, -1.5833], 15);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  // Predefine stops with coords
  const stops = {
    'KSB':               [6.6670, -1.5830],
    'Medical Village':   [6.6680, -1.5800],
    'Brunei':            [6.6660, -1.5850],
    'Casely Hayeford':   [6.6720, -1.5805],
    'College of Science':[6.6650, -1.5820],
    'Commercial Area':   [6.6675, -1.5870]
  };

  // --- LIVE SHUTTLES TABLE & SIMULATION ---
  let liveData = [
    { route:'KSB → Medical Village',       eta:5,  cap:30 },
    { route:'Brunei → Commercial Area',     eta:2,  cap:25 },
    { route:'Medical Village → Brunei',     eta:8,  cap:28 },
    { route:'Commercial Area → KSB',        eta:12, cap:22 },
    { route:'Casely Hayeford → Science',    eta:7,  cap:35 },
    { route:'College of Science → KSB',     eta:4,  cap:32 },
  ];
  const liveBody = document.getElementById('liveTableBody');
  function renderLiveTable() {
    liveBody.innerHTML = '';
    liveData.forEach(item => {
      const tr = document.createElement('tr');
      const status = item.eta <= 3 ? 'Arriving' : 'On Route';
      tr.innerHTML = `
        <td>${item.route}</td>
        <td>${item.eta} min</td>
        <td>${status}</td>
        <td>${item.cap} seats</td>
      `;
      liveBody.appendChild(tr);
    });
  }
  // Update ETAs & capacities
  setInterval(() => {
    liveData = liveData.map(item => ({
      route: item.route,
      eta:   Math.max(1, item.eta - 1),
      cap:   Math.max(0, item.cap - Math.floor(Math.random()*3))
    }));
    renderLiveTable();
  }, 10000);
  renderLiveTable();

  // Markers for each stop
  Object.entries(stops).forEach(([name, coords]) => {
    L.marker(coords).addTo(map).bindPopup(name);
  });

  // --- BOOKING & CONFIRMATION MODAL GENERATION ---
  const bookings = [];
  const bookingForm = document.getElementById('bookingForm');
  bookingForm.addEventListener('submit', e => {
    e.preventDefault();
    const p = pickup.value, d = destination.value, dt = date.value, ts = timeslot.value;
    if (!p||!d||!dt||!ts|| p===d) {
      alert('Please complete the form correctly.');
      return;
    }
    const id = Date.now();
    bookings.push({ id, p, d, dt, ts });
    alert(`Booked: ${p} → ${d} on ${dt} at ${ts}`);
    bookingForm.reset();
  });

  // --- RIDE HISTORY MODAL & CONTROLS ---
  const historyModal = document.getElementById('historyModal');
  const prevBtn  = document.getElementById('prevRidesBtn');
  const upcBtn   = document.getElementById('upcomingRidesBtn');
  const allBtn   = document.getElementById('allRidesBtn');
  const rideList = document.getElementById('rideList');
  const rideDetail = document.getElementById('rideDetail');
  const qrious    = new QRious({ size: 180 });

  function openHistory(type) {
    [prevBtn, upcBtn, allBtn].forEach(b=>b.classList.remove('active'));
    ({ prev: prevBtn, upcoming: upcBtn, all: allBtn })[type].classList.add('active');
    rideList.innerHTML = '';
    rideDetail.innerHTML = '<p>Select a ride to view details.</p>';
    const today = new Date().toISOString().split('T')[0];
    bookings
      .filter(b => type==='all' || (type==='prev' ? b.dt < today : b.dt >= today))
      .forEach(b => {
        const li = document.createElement('li');
        li.textContent = `${b.p} → ${b.d} — ${b.dt} @ ${b.ts}`;
        li.dataset.id = b.id;
        rideList.appendChild(li);
      });
    historyModal.style.display = 'flex';
  }

  prevBtn.addEventListener('click',  () => openHistory('prev'));
  upcBtn.addEventListener('click',   () => openHistory('upcoming'));
  allBtn.addEventListener('click',   () => openHistory('all'));
  document.querySelectorAll('.close-btn[data-close="historyModal"]')[0]
    .addEventListener('click', () => historyModal.style.display='none');

  rideList.addEventListener('click', e => {
    if (e.target.tagName === 'LI') {
      const ride = bookings.find(b=>b.id==e.target.dataset.id);
      qrious.value = JSON.stringify(ride);
      rideDetail.innerHTML = `
        <h4>Ride Details</h4>
        <p><strong>From:</strong> ${ride.p}</p>
        <p><strong>To:</strong> ${ride.d}</p>
        <p><strong>Date:</strong> ${ride.dt}</p>
        <p><strong>Time:</strong> ${ride.ts}</p>
        <canvas id="rideQr"></canvas>
      `;
      // generate QR for this ride
      new QRious({ element: document.getElementById('rideQr'), size: 200, value: JSON.stringify(ride) });
    }
  });

  // --- QUICK‑BOOK MODALS ---
  document.querySelectorAll('.card[data-page]').forEach(card => {
    const modalId = card.dataset.page;
    const modal   = document.getElementById(modalId);
    card.addEventListener('click', () => modal.style.display = 'flex');
  });
  document.querySelectorAll('.close-btn[data-close]').forEach(btn => {
    btn.addEventListener('click', () => {
      const id = btn.dataset.close;
      document.getElementById(id).style.display = 'none';
    });
  });

});
</script>

</body>
</html>
